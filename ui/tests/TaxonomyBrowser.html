<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Test: Taxonomy browser</title>

   <link rel="stylesheet" href="../css/tippy.css">
   <link rel="stylesheet" href="../css/font-awesome.min.css">
   <link rel="stylesheet" href="../css/jquery.dataTables.min.css">

   <script src="../js/jquery.min.js"></script>
   <script src="../js/popper.min.js"></script>
   <script src="../js/jquery.dataTables.min.js"></script>
   <script src="../js/tippy-bundle.umd.js"></script>
</head>

<body>
   <div id='taxonomy_browser_container' class='ictv-custom'>

   <script src="../dist/ICTV-TaxonomyBrowser.js"></script>
   <script type="text/javascript">


      // This runs when the DOM hierarchy has been fully constructed.
      document.addEventListener("DOMContentLoaded", async () => {

         //----------------------------------------------------------------------------------------
         // Initialize the ICTV AppSettings
         //----------------------------------------------------------------------------------------

         // The website's base URL.
         window.ICTV.AppSettings.applicationURL = "https://test.ictv.global";

         // Set the base URL for web services.
         window.ICTV.AppSettings.baseWebServiceURL = "https://dev.ictv.global/ICTV/api/";

         // The current MSL release number.
         window.ICTV.AppSettings.currentMslRelease = "39";

         // The location of release proposal files. 
         window.ICTV.AppSettings.releaseProposalsURL = "https://test.ictv.global/ictv/proposals/";

         // The taxon history page name.
         window.ICTV.AppSettings.taxonHistoryPage = "/taxonomy/taxondetails";

         
         // The DOM selector of the container Element added to the page.
         const containerSelector = "#taxonomy_browser_container";
         
         const controlKey = "taxbrowser";
         const ctrlSettings = {
            displayChildCount: true,
            displayHistoryCtrls: true,
            displayMemberOfCtrls: true,
            displayRankCtrls: true,
            displayReleaseHistory: true,
            displaySearchPanel: true,
            leftAlignAll: false,

            // Should we replace the release's rank count with the parent taxon's rank count?
            // Note: this is only used by minimal Taxonomy Controls on wiki pages.
            useParentTaxonForReleaseRankCount: false,

            useSmallFont: false
         }

         const initialData =  {
            displayType: window.ICTV.TaxonomyDisplayType.display_all,
            releaseNumber: settings_.currentMslRelease,
            taxonName: null
         }

         // Create a new TaxonomyBrowser instance.
         const taxonomyBrowser = new window.ICTV.TaxonomyBrowser(containerSelector, controlKey, ctrlSettings, initialData);
         if (!taxonomyBrowser) { throw new Error("Invalid taxonomy browser"); } 
         
         // Initialize and display the taxonomy browser.
         taxonomyBrowser.initialize();

         return;
      });

   </script>
</body>

</html>